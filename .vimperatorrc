source ~/.vimperator/plugin/libly.js
autocmd VimperatorEnter .*
set gui=none
colorscheme vimpwhite
set hintchars=12345
" C-g as cancel (C-q is stop)
cmap <C-]> i<Esc>
imap <C-]> i<Esc>
noremap <C-]> i<Esc>
" ignorekeys add -except=:,/,f,F,r,d,<C-[>,<Esc>,h,j,k,l,t,o,d,w,i,u https://vk.com

autocmd PageLoad .* js blurAllInputFields()
:js << EOF
function blurAllInputFields()
{
    var inputs = window.content.window.document.getElementsByTagName('input');
    for (index = 0; index < inputs.length; ++index)
        inputs[index].blur();
}
EOF

" Run :vimperatortoggle to enable or disable Vimperator as needed.
javascript function vimperatortoggle() { if (is_vimperator_active) { liberator.execute(':disable') } else { liberator.execute(':enable') }; }
command! vimperatortoggle javascript vimperatortoggle()
 
" Run :disable to disable Vimperator and resume normal Firefox behavior.
javascript function disable() { is_vimperator_active = false; modes.passAllKeys = true; }
command! disable javascript disable()
 
" Run :enable to enable Vimperator.
javascript function enable() { is_vimperator_active = true;  }
command! enable javascript enable()
:enable

" Show properties of an object within JavaScript.
javascript <<EOB
function inspect(what) {
var nodes = [];
for (var node in what)
nodes.push(node);
liberator.echo(nodes.sort().join(', '));
}
EOB

so ~/.pentadactyl/styles.rc
so ~/.pentadactyl/tomorrownight.rc

set cpt=l
"" complete search engine suguest
set complete=lS

" set downloadsort='-time'
set maxitems=9
set shell='/bin/zsh'
set shellcmdflag='-c'
"show current link in a command line
"set showstatuslinks='command'

" feedSomeKeys_3.js {{{
command! -nargs=+ lazy autocmd VimperatorEnter .* <args>
lazy fmaps -u='mail\.google\.com/mail' -events=vkeydown,keypress,vkeyup j k
lazy fmaps -u='mail\.google\.com/mail' c n p o u x s r a ? gi gs gt gd ga gc U
lazy fmaps -u='mail\.google\.com/mail' -p=<Leader> d,# s,! e
lazy fmaps -u='mail\.google\.com/mail/.*/[0-9a-f]+$' c j,n k,p n,j p,k o u x s r a ? gi gs gt gd ga gc
lazy fmaps -u='mail\.google\.com/mail/.*/[0-9a-f]+$' -p=<Leader> d,# s,! e

lazy fmaps -u='(fastladder|livedoor)\.com/reader' j k n,s s a p o r v c m i,p J,<Space> K,<S-Space> z b < > q w e,g

lazy fmaps -u='www\.facebook\.com' -events=vkeydown j k l c

lazy fmaps -u='wri\.pe' -events=vkeydown n i d c s h j k l o e
lazy fmaps -u='trello\.com/b/' -events=vkeydown j k d l e n v w

lazy fmaps -u='reblog\.machine\.mamemomonga\.com/dashboard' j k t l m
lazy fmaps -u='www\.pixiv\.net/member_illust\.php\?mode=manga' -events=vkeydown j k z 0
lazy fmaps -u='\.vk\.com' -events=vkeydown,keypress,vkeyup : / f F r d <C-[> <Esc> h j k l t o d w i u
" }}}


" custom mappings """""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
map  <F3> :styletoggle<Space>-name<Space>tomorrownight<CR>
map  <Leader>t :styletoggle<Space>-name<Space>minitabs<CR>

map , <leader>
nmap  <Leader>, :noh<CR>

map I_<C-w> I_<C-BS>
 
"map  <C-a> -silent :sidebar Scrapbook<CR>
"map  <C-d> -silent :sidebar Downloads<CR>
map  B -silent :bmarks<CR>
map  gr gT

map <F4> :set complete=lS<CR>
map <F5> :set complete=bookmark<CR>

" remap 'o' to 'e'
" nmap  e o

imap <c-a> <home>
cmap <c-a> <home>
imap <a-f> <C-Right>
cmap <a-f> <C-Right>
imap <a-b> <C-Left>
cmap <a-b> <C-Left>
imap <c-e> <end>
cmap <c-e> <end>

"unmap gf 
"unmap gh 
"-------------[ Noscript ]---------------------------
nmap  <leader>A     :noscript toggleperm<CR>
nmap  <leader>a     :noscript toggletemp<CR>

map <A-i> -js <<EOF

set titlestring=firefox
set history=900

"" J/K move left/right
map  J h
map  K l
"" U list closed tabs
map  U :undo<Space>
map  <leader>b :sidebar Bookmarks<CR>

"" jumping at hint mode, seee http://code.google.com/p/dactyl/issues/detail?id=158
" map -modes hints <C-f> -ex normal! <C-f>
" map -modes hints <C-b> -ex normal! <C-b>
map C-tab nop
map <C-tab> <Nop>


imap  <C-y> <S-Ins>
" tmap  <C-y> i_<S-Ins>
map  <C-y> <S-Ins>
cmap  <C-y> <S-Ins>
vmap  <C-y> <S-Ins>
map s :sidebar<SPACE>
map S :sbcl<CR>
map  w b
map $ <End>

" Set the external editor
set editor='/usr/bin/gvim -f +<line> <file>'

" toggle styles """""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" map base,caret,normal,visual <C-g> <Esc>
"
" map base,normal,caret,insert,visual <C-n> <Down>
" map base,normal,caret,insert,visual <C-p> <Up>
" map caret,insert,visual <C-b> <Left>
" map caret,insert,visual <C-f> <Right>
"
" map command-line <C-n> <Tab>
" map command-line <C-p> <S-Tab>
"
" map command,command-line,insert <C-/> <C-v><C-z>
" map command,caret,command-line,insert,visual <A-w> <C-v><C-c>
"
" map command,command-line,insert <C-y> <C-v><C-v>

map <C-a> 0
" map -m normal <C-b> <A-left>
map <C-e> $
" map -m normal <C-f> <A-right>

" imap <A-b> <C-Left>
" imap <A-f> <C-Right>
" imap <A-d> <C-S-Right><Del>
" cmap <A-b> <C-Left>
" cmap <A-f> <C-Right>
" cmap <A-d> <C-S-Right><Del>
" 
" imap <A-и> <C-Left>
" imap <A-а> <C-Right>
" imap <A-в> <C-S-Right><Del>
" cmap <A-и> <C-Left>
" cmap <A-а> <C-Right>
" cmap <A-в> <C-S-Right><Del>
" 
" map gr gT
" map пк gT
" map пе gt
" 
" map <A-q> gT
" map <A-й> gT
" map <A-w> gt
" map <A-ц> gt
" map <A-3> :tabmove +1<cr>
" map <A-`> :tabmove -1<cr>
" 
" " Will focus left tab after closing
" map d D

" Russian language keyboard mappings (UTF-8)
map ё `
map й q
map ц w
map у e
map к r
map е t
map н y
map г u
map ш i
map щ o
map з p
map х [
map ъ ]
map ф a
map ы s
map в d
map а f
map п g
map р h
map о j
map л k
map д l
map ж ;
map э '
map я z
map ч x
map с c
map м v
map и b
map т n
map ь m
map б ,
map ю .
map Ё ~
map Й Q
map Ц W
map У E
map К R
map Е T
map Н Y
map Г U
map Ш I
map Щ O
map З P
map Х {
map Ъ }
map Ф A
map Ы S
map В D
map А F
map П G
map Р H
map О J
map Л K
map Д L
map Ж :
map Э "
map Я Z
map Ч X
map С C
map М V
map И B
map Т N
map Ь M
map Б <
map Ю >
map . /
