#!/bin/zsh

scr_dir=~/tmp/shots
window='root'
name="screenshot"
filename="${name}-$(date +%Y-%m-%d_%H-%M-%S).png"
size_=200
colorspace_='0.96,0.5,0.09'
urgency_=normal
summary_="${scr_dir}/${filename}"

function shot_notify(){
    ~/bin/scripts/pic_notify "${summary_}"
}

function make_shot(){
    local -a arglist=()
    arglist+=( -p 0 )
    [[ ${select_window_} == true ]] && arglist+=( -s )
    [[ ${apply_colorpace_} == true ]] && arglist+=( -c "${colorspace_}" )
    arglist+="${summary_}"
    maim ${arglist[@]} && \
    shot_notify
}

case $1 in
    select)
        select_window_=true
        apply_colorpace_=false
        make_shot "$@"
        ;;
    *) 
        select_window_=false
        apply_colorpace_=false
        make_shot "$@"
        ;;
esac
