#!/bin/zsh

one_only=1

# Created by [jvinet], improved by [Neg]
for intf in $(ifconfig -a |awk -F : '/^[[:alnum:]]+:/{print $1}'|xargs); do
	ip=$(ip addr show "${intf}" 2>/dev/null | grep 'inet ' | grep -o -E '[0-9\.]+' | head -n 1)
	if [[ "${ip}" ]]; then
		builtin print "${intf}: ${ip}"
		if [[ ! ${one_only} ]]; then
            exit # only output one, as that's what our conkyrc expects
        fi
	fi
done
