#!/bin/zsh

function proc(){
    tmux -S $(readlink -f ~neg/1st_level/logs.socket) neww 'dmesg --follow --human --nopager'
    tmux -S $(readlink -f ~neg/1st_level/logs.socket) neww tail -f /var/log/*.log ~/.xsession-errors
}

function main(){
    local logs_classname="_logs_"
    local wid=$(xdotool search --classname _logs_)
    local time_=1s
    if [[ -z "${wid}" ]]; then
        st -c '_logs_' -e bash -c "tmux -S $(readlink -f ~neg/1st_level/logs.socket) new -s _logs_ -n _logs_ dmesg --follow --human --nopager" &
        {
            sleep 0.3s;
            tmux -S $(readlink -f ~neg/1st_level/logs.socket) neww tail -f /var/log/*.log ~/.xsession-errors
        }
    fi
}

main "$@"
