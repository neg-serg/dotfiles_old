#!/bin/bash
#
# Start a composition manager.
# (xcompmgr in this case)

function comphelp () {
  echo "Composition Manager:"
  echo "   (re)start: composite"
  echo "   stop:      composite -s"
  echo "   toggle:    composite -t"
  echo "   query:     composite -q"
  echo "              returns 1 if composition manager is running, else 0"
  exit
}

function checkcomp () {
  ( ps nc -C xcompmgr &>/dev/null ) && exit 1
  exit 0
}

function stopcomp () {
  ( ps nc -C xcompmgr &>/dev/null ) && killall xcompmgr
}

function startcomp () {
  stopcomp
# Example settings only. Replace with your own.
  xcompmgr -cCfF -o .35 -r 3.2 -t-2 -l-1 -D 3 -O-.03 -I-.015 &
  exit
}

function togglecomp () {
  ( checkcomp )
  if [ $? == 1 ]; then 
          stopcomp
  else
          startcomp
  fi
}

case "$1x" in
    "x") startcomp;;
  "-qx") checkcomp;;
  "-tx") togglecomp;;
  "-sx") stopcomp; exit;;
      *) comphelp;;
esac
